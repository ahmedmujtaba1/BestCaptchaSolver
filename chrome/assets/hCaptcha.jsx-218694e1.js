const B={};function oe(e){B.context=e}const re=(e,t)=>e===t,M={equals:re};let H=G;const b=1,O=2,Y={owned:null,cleanups:null,context:null,owner:null};var h=null;let k=null,c=null,u=null,g=null,F=0;function ge(e,t){const s=c,n=h,o=e.length===0,r=o?Y:{owned:null,cleanups:null,context:null,owner:t||n},f=o?e:()=>e(()=>A(()=>j(r)));h=r,c=null;try{return P(f,!0)}finally{c=s,h=n}}function L(e,t){t=t?Object.assign({},M,t):M;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(s.value)),z(s,o));return[$.bind(s),n]}function we(e,t,s){const n=N(e,t,!1,b);C(n)}function ie(e,t,s){H=ce;const n=N(e,t,!1,b);n.user=!0,g?g.push(n):C(n)}function W(e,t,s){s=s?Object.assign({},M,s):M;const n=N(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,C(n),$.bind(n)}function A(e){const t=c;c=null;try{return e()}finally{c=t}}function de(e){ie(()=>A(e))}function $(){const e=k;if(this.sources&&(this.state||e))if(this.state===b||e)C(this);else{const t=u;u=null,P(()=>q(this),!1),u=t}if(c){const t=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(t)):(c.sources=[this],c.sourceSlots=[t]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function z(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&P(()=>{for(let o=0;o<e.observers.length;o+=1){const r=e.observers[o],f=k&&k.running;f&&k.disposed.has(r),(f&&!r.tState||!f&&!r.state)&&(r.pure?u.push(r):g.push(r),r.observers&&J(r)),f||(r.state=b)}if(u.length>1e6)throw u=[],new Error},!1)),t}function C(e){if(!e.fn)return;j(e);const t=h,s=c,n=F;c=h=e,le(e,e.value,n),c=s,h=t}function le(e,t,s){let n;try{n=e.fn(t)}catch(o){e.pure&&(e.state=b,e.owned&&e.owned.forEach(j),e.owned=null),Q(o)}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?z(e,n):e.value=n,e.updatedAt=s)}function N(e,t,s,n=b,o){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:null,pure:s};return h===null||h!==Y&&(h.owned?h.owned.push(r):h.owned=[r]),r}function R(e){const t=k;if(e.state===0||t)return;if(e.state===O||t)return q(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<F);)(e.state||t)&&s.push(e);for(let n=s.length-1;n>=0;n--)if(e=s[n],e.state===b||t)C(e);else if(e.state===O||t){const o=u;u=null,P(()=>q(e,s[0]),!1),u=o}}function P(e,t){if(u)return e();let s=!1;t||(u=[]),g?s=!0:g=[],F++;try{const n=e();return ae(s),n}catch(n){u||(g=null),Q(n)}}function ae(e){if(u&&(G(u),u=null),e)return;const t=g;g=null,t.length&&P(()=>H(t),!1)}function G(e){for(let t=0;t<e.length;t++)R(e[t])}function ce(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:R(n)}for(B.context&&oe(),t=0;t<s;t++)R(e[t])}function q(e,t){const s=k;e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];o.sources&&(o.state===b||s?o!==t&&R(o):(o.state===O||s)&&q(o,t))}}function J(e){const t=k;for(let s=0;s<e.observers.length;s+=1){const n=e.observers[s];(!n.state||t)&&(n.state=O,n.pure?u.push(n):g.push(n),n.observers&&J(n))}}function j(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),o=s.observers;if(o&&o.length){const r=o.pop(),f=s.observerSlots.pop();n<o.length&&(r.sourceSlots[f]=n,o[n]=r,s.observerSlots[n]=f)}}if(e.owned){for(t=0;t<e.owned.length;t++)j(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ue(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Q(e){throw e=ue(e),e}function me(e,t){return A(()=>e(t||{}))}function ve(e){let t=!1;const s=e.keyed,n=W(()=>e.when,void 0,{equals:(o,r)=>t?o===r:!o==!r});return W(()=>{const o=n();if(o){const r=e.children,f=typeof r=="function"&&r.length>0;return t=s||f,f?A(()=>r(o)):r}return e.fallback},void 0,void 0)}const fe="1.1.0";let a=await chrome.storage.local.get(null);console.log("settings",a.solveInSec);function he(){a.apikey&&(async()=>{if(a.power===!1||a.hCap===!1)return;const e=l=>document.querySelector(l);function t(l){console.log("%cnoCaptchaAi.com ~ %c"+l,"background: #222; color: #bada55","")}window.top===window&&t("auto open= ",a.autoOpen+"auto solve= ",a.autoSolve+"loop running in bg");function s(){const l=document.body.getBoundingClientRect();return l?.width===0||l?.height===0?!1:document.querySelector("div.check")!==null}function n(l){return new Promise(w=>setTimeout(w,l))}function o(){try{const l=document.querySelector("div.check");return l&&l.style.display==="block"}catch(l){return console.error(l),!1}}function r(){return!navigator.onLine||I||a.apikey===void 0||""}async function f(l){const w=await(await fetch(l)).blob();return new Promise(function(E){const p=new FileReader;p.readAsDataURL(w),p.addEventListener("loadend",function(){E(p.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),p.addEventListener("error",function(){t("❌ Failed to convert url to base64")})})}const[V]=L((await chrome.storage.local.get("apikey")).apikey),[X,pe]=L((await chrome.storage.local.get("plantype")).plantype);L(!0),L(!0);let U,I=!1;const K={"Content-Type":"application/json",apikey:V()};for(;!r();){if(!a.apikey){window.alert("Please enter your apikey");break}if(await n(1e3),a.autoOpen&&s()){if(o()){t("found solved");break}await n(1e3),e("#checkbox")?.click()}else a.autoSolve&&e("h2.prompt-text")!==null&&(a.logs===!0&&t("opening box"),await Z())}async function Z(){const{target:l,cells:w,images:E}=await te();if(!a.autoSolve)return;U=new Date;const p=new URLSearchParams(location.hash);try{let i=await fetch(ee("solve"),{method:"POST",headers:K,body:JSON.stringify({images:E,target:l,method:"hcaptcha_base64",sitekey:p.get("sitekey"),site:p.get("host"),ln:document.documentElement.lang||navigator.language,softid:`chrome_extension v1${fe}`})});if(i=await i.json(),a.logs===!0&&t("sent for solving"),t("🕘 waiting for response"),i.status==="new"){a.logs===!0&&console.table(i),t("waiting 2s"),await n(2e3);const S=await(await fetch(i.url)).json();for(const d of S.solution)w[d].click()}else if(i.status==="solved"){let ne=function(m){for(let v=m.length-1;v>0;v--){const T=Math.floor(Math.random()*(v+1));[m[v],m[T]]=[m[T],m[v]]}return m};a.logs===!0&&console.table(i),a.logs===!0&&console.log("noCaptchaAi.com ~ ☑️ server procssed in",i.processing_time),t("🖱️ -> 🖼️");const S=new Date-U,d=a.solveInSec*1e3-S;let D;d>=600?D=(d-300)/i.solution.length:D=150;const se=ne(i.solution);for(const m of se){const v=Math.floor(Math.random()*window.innerWidth),T=Math.floor(Math.random()*window.innerHeight),_=document.elementFromPoint(v,T);_&&_.dispatchEvent(new MouseEvent("mousemove",{clientX:v,clientY:T})),w[m].click(),await n(D)}}else{if(i.status==="Unauthorized")return isApikeyEmpty=!0,window.alert("Please enter your apikey"),await n(2e3),t(i.status,i.message);i.error.match("restricted")?(I=!0,window.alert("Your apikey is restricted"),await n(3e3),window.open("https://dash.nocaptchaai.com")):i.error==="Invalid apikey."?(console.log(i.error),window.alert("Invalid apikey"),await n(4e3),I=!0):i.error&&(console.log(i.error),window.alert(i.message),await n(4e3),I=!0)}const x=new Date-U;console.log("elapsedTime",x);const y=a.solveInSec*1e3-x;console.log("solveInSec",a.solveInSec),console.log("remainingTime",y),await n(y),a.logs===!0&&t("waiting random time"),t("☑️ sent!"),document.querySelector(".button-submit").click(),U=0}catch(i){console.error(i)}}function ee(l){return"https://"+X()+".nocaptchaai.com/"+l}function te(l=500){return new Promise(async w=>{const E=setInterval(async function(){let p=document.querySelector(".prompt-text")?.textContent;if(!p)return;const i=document.querySelectorAll(".task-image .image");if(i.length!==9)return;const x={};for(let y=0;y<i.length;y++){const S=i[y];if(!S)return;const d=S.style.background.match(/url\("(.*)"/)?.at(1)||null;if(!d||d==="")return;x[y]=await f(d)}return clearInterval(E),w({target:p,cells:i,images:x})},l)})}})()}he();export{ve as S,we as a,L as b,ge as c,me as d,W as e,de as o,B as s,fe as v};
