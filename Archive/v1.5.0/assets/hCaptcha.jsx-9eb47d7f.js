const z={};function ie(e){z.context=e}const le=(e,t)=>e===t,j={equals:le};let G=X;const b=1,D=2,J={owned:null,cleanups:null,context:null,owner:null};var p=null;let A=null,u=null,f=null,w=null,H=0;function de(e,t){const s=u,n=p,o=e.length===0,r=o?J:{owned:null,cleanups:null,context:null,owner:t||n},i=o?e:()=>e(()=>C(()=>_(r)));p=r,u=null;try{return O(i,!0)}finally{u=s,p=n}}function R(e,t){t=t?Object.assign({},j,t):j;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(s.value)),V(s,o));return[Q.bind(s),n]}function me(e,t,s){const n=Y(e,t,!1,b);I(n)}function ae(e,t,s){G=he;const n=Y(e,t,!1,b);n.user=!0,w?w.push(n):I(n)}function T(e,t,s){s=s?Object.assign({},j,s):j;const n=Y(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,I(n),Q.bind(n)}function C(e){const t=u;u=null;try{return e()}finally{u=t}}function ye(e){ae(()=>C(e))}function ce(e){const t=T(e),s=T(()=>B(t()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}function Q(){const e=A;if(this.sources&&(this.state||e))if(this.state===b||e)I(this);else{const t=f;f=null,O(()=>N(this),!1),f=t}if(u){const t=this.observers?this.observers.length:0;u.sources?(u.sources.push(this),u.sourceSlots.push(t)):(u.sources=[this],u.sourceSlots=[t]),this.observers?(this.observers.push(u),this.observerSlots.push(u.sources.length-1)):(this.observers=[u],this.observerSlots=[u.sources.length-1])}return this.value}function V(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&O(()=>{for(let o=0;o<e.observers.length;o+=1){const r=e.observers[o],i=A&&A.running;i&&A.disposed.has(r),(i&&!r.tState||!i&&!r.state)&&(r.pure?f.push(r):w.push(r),r.observers&&K(r)),i||(r.state=b)}if(f.length>1e6)throw f=[],new Error},!1)),t}function I(e){if(!e.fn)return;_(e);const t=p,s=u,n=H;u=p=e,ue(e,e.value,n),u=s,p=t}function ue(e,t,s){let n;try{n=e.fn(t)}catch(o){e.pure&&(e.state=b,e.owned&&e.owned.forEach(_),e.owned=null),Z(o)}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?V(e,n):e.value=n,e.updatedAt=s)}function Y(e,t,s,n=b,o){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:p,context:null,pure:s};return p===null||p!==J&&(p.owned?p.owned.push(r):p.owned=[r]),r}function F(e){const t=A;if(e.state===0||t)return;if(e.state===D||t)return N(e);if(e.suspense&&C(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<H);)(e.state||t)&&s.push(e);for(let n=s.length-1;n>=0;n--)if(e=s[n],e.state===b||t)I(e);else if(e.state===D||t){const o=f;f=null,O(()=>N(e,s[0]),!1),f=o}}function O(e,t){if(f)return e();let s=!1;t||(f=[]),w?s=!0:w=[],H++;try{const n=e();return fe(s),n}catch(n){f||(w=null),f=null,Z(n)}}function fe(e){if(f&&(X(f),f=null),e)return;const t=w;w=null,t.length&&O(()=>G(t),!1)}function X(e){for(let t=0;t<e.length;t++)F(e[t])}function he(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:F(n)}for(z.context&&ie(),t=0;t<s;t++)F(e[t])}function N(e,t){const s=A;e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];o.sources&&(o.state===b||s?o!==t&&F(o):(o.state===D||s)&&N(o,t))}}function K(e){const t=A;for(let s=0;s<e.observers.length;s+=1){const n=e.observers[s];(!n.state||t)&&(n.state=D,n.pure?f.push(n):w.push(n),n.observers&&K(n))}}function _(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),o=s.observers;if(o&&o.length){const r=o.pop(),i=s.observerSlots.pop();n<o.length&&(r.sourceSlots[i]=n,o[n]=r,s.observerSlots[n]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)_(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function pe(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Z(e){throw e=pe(e),e}function B(e){if(typeof e=="function"&&!e.length)return B(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=B(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function ve(e,t){return C(()=>e(t||{}))}function be(e){let t=!1;const s=e.keyed,n=T(()=>e.when,void 0,{equals:(o,r)=>t?o===r:!o==!r});return T(()=>{const o=n();if(o){const r=e.children,i=typeof r=="function"&&r.length>0;return t=s||i,i?C(()=>r(o)):r}return e.fallback},void 0,void 0)}function ke(e){let t=!1,s=!1;const n=(i,h)=>i[0]===h[0]&&(t?i[1]===h[1]:!i[1]==!h[1])&&i[2]===h[2],o=ce(()=>e.children),r=T(()=>{let i=o();Array.isArray(i)||(i=[i]);for(let h=0;h<i.length;h++){const E=i[h].when;if(E)return s=!!i[h].keyed,[h,E,i[h]]}return[-1]},void 0,{equals:n});return T(()=>{const[i,h,E]=r();if(i<0)return e.fallback;const P=E.children,k=typeof P=="function"&&P.length>0;return t=s||k,k?C(()=>P(h)):P},void 0,void 0)}function Se(e){return e}const ge="1.5.0";let c=await chrome.storage.local.get(null);console.log("settings",c.solveInSec);function we(){c.apikey&&(async()=>{if(c.power===!1||c.hCap===!1)return;const e=a=>document.querySelector(a);function t(a){console.log("%cnoCaptchaAi.com ~ %c"+a,"background: #222; color: #bada55","")}window.top===window&&t("auto open= ",c.autoOpen+"auto solve= ",c.autoSolve+"loop running in bg");function s(){const a=document.body.getBoundingClientRect();return a?.width===0||a?.height===0?!1:document.querySelector("div.check")!==null}function n(a){return new Promise(d=>setTimeout(d,a))}function o(){try{const a=document.querySelector("div.check");return a&&a.style.display==="block"}catch(a){return console.error(a),!1}}function r(){return!navigator.onLine||L||c.apikey===void 0||""}async function i(a){const d=await(await fetch(a)).blob();return new Promise(function(M){const g=new FileReader;g.readAsDataURL(d),g.addEventListener("loadend",function(){M(g.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),g.addEventListener("error",function(){t("❌ Failed to convert url to base64")})})}const[h]=R((await chrome.storage.local.get("apikey")).apikey),[E,P]=R((await chrome.storage.local.get("plantype")).plantype);R(!0),R(!0);let k,L=!1;const ee={"Content-Type":"application/json",apikey:h()};for(;!r();){if(!c.apikey){window.alert("Please enter your apikey");break}if(await n(1e3),console.log("looping"),console.log("is widget",s()),console.log("open",c.autoOpen),c.autoOpen&&s()){if(o()){console.log("found solved");break}await n(100),e("#checkbox")?.click()}else c.autoSolve&&e("h2.prompt-text")!==null&&(c.logs===!0&&t("opening box"),await te())}async function te(){const{target:a,cells:d,images:M}=await se();if(!c.autoSolve)return;k=new Date;const g=new URLSearchParams(location.hash);try{let l=await fetch(ne("solve"),{method:"POST",headers:ee,body:JSON.stringify({images:M,target:a,method:"hcaptcha_base64",sitekey:g.get("sitekey"),site:g.get("host"),ln:document.documentElement.lang||navigator.language,softid:`chrome_extension v1${ge}`})});if(l=await l.json(),c.logs===!0&&t("sent for solving"),t("🕘 waiting for response"),l.status==="new"){c.logs===!0&&console.table(l),t("waiting 2s"),await n(2e3);const x=await(await fetch(l.url)).json();for(const m of x.solution)d[m].click()}else if(l.status==="solved"){let oe=function(y){for(let v=y.length-1;v>0;v--){const q=Math.floor(Math.random()*(v+1));[y[v],y[q]]=[y[q],y[v]]}return y};c.logs===!0&&console.table(l),c.logs===!0&&console.log("noCaptchaAi.com ~ ☑️ server procssed in",l.processing_time),t("🖱️ -> 🖼️");const x=new Date-k,m=c.solveInSec*1e3-x;let W;m>=600?W=(m-300)/l.solution.length:W=150;const re=oe(l.solution);for(const y of re){const v=Math.floor(Math.random()*window.innerWidth),q=Math.floor(Math.random()*window.innerHeight),$=document.elementFromPoint(v,q);$&&$.dispatchEvent(new MouseEvent("mousemove",{clientX:v,clientY:q})),d[y].click(),await n(W)}}else{if(l.status==="Unauthorized")return isApikeyEmpty=!0,window.alert("Please enter your apikey"),await n(2e3),t(l.status,l.message);l.error.match("restricted")?(L=!0,window.alert("Your apikey is restricted"),await n(3e3),window.open("https://dash.nocaptchaai.com")):l.error==="Invalid apikey."?(console.log(l.error),window.alert("Invalid apikey"),await n(4e3),L=!0):l.error&&(console.log(l.error),window.alert(l.message),await n(4e3),L=!0)}const U=new Date-k;console.log("elapsedTime",U);const S=c.solveInSec*1e3-U;console.log("solveInSec",c.solveInSec),console.log("remainingTime",S),await n(S),c.logs===!0&&t("waiting random time"),t("☑️ sent!"),document.querySelector(".button-submit").click(),k=0}catch(l){console.error(l)}}function ne(a){return"https://"+E()+".nocaptchaai.com/"+a}function se(a=500){return new Promise(async d=>{const M=setInterval(async function(){let g=document.querySelector(".prompt-text")?.textContent;if(!g)return;const l=document.querySelectorAll(".task-image .image");if(l.length!==9)return;const U={};for(let S=0;S<l.length;S++){const x=l[S];if(!x)return;const m=x.style.background.match(/url\("(.*)"/)?.at(1)||null;if(!m||m==="")return;U[S]=await i(m)}return clearInterval(M),d({target:g,cells:l,images:U})},a)})}})()}we();export{Se as M,be as S,me as a,R as b,de as c,ve as d,T as e,ke as f,ye as o,z as s,ge as v};
