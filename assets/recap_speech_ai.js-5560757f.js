import{T as r,g as q}from"./utils-db674be6.js";let t=await chrome.storage.sync.get(null);(async()=>{if(!t.apikey||!t.power||!t.reCap||t.RsolveType!=="audio")return;function l(){return document.querySelector("#audio-instructions")!==null||document.querySelector(".rc-doscaptcha-header")!==null}function s(){document.querySelector("#recaptcha-anchor")?.click()}const m=()=>document.querySelector(".recaptcha-checkbox")!==null;function d(){return document.querySelector(".recaptcha-checkbox")!==null}function p(){return document.querySelector(".rc-imageselect-instructions")!==null}function o(){if(n())return!1;const c=document.querySelector(".recaptcha-checkbox")?.getAttribute("aria-checked")==="true",e=document.querySelector("#recaptcha-verify-button")?.disabled;return c||e}function y(){document.querySelector("#recaptcha-verify-button")?.click()}function n(){return document.querySelector(".rc-doscaptcha-header")?.innerText==="Try again later"}async function f(){m()&&(o()||(await r.sleep(500),t.RautoOpen&&s()))}async function h(){o()||(await r.sleep(500),document.querySelector("#recaptcha-audio-button")?.click())}async function g(){if(t.RautoSolve===!1||o()||n())return;const c=document.querySelector(".rc-audiochallenge-tdownload-link")?.href||document.querySelector("#audio-source")?.src;let e=document.querySelector("html")?.getAttribute("lang")?.trim();(!e||e.length===0)&&(e="en");const b=r.now();let a=await q("https://workproxy2.nocaptchaai.com/audio",t.apikey,c);console.log(a),document.querySelector("#audio-response").value=a;let i=parseInt(1e3);i=i||1e3;const u=i-(r.now()-b);u>0&&await r.sleep(u),y()}async function S(){return[...document.querySelectorAll('iframe[src*="/recaptcha/api2/bframe"]'),...document.querySelectorAll('iframe[src*="/recaptcha/enterprise/bframe"]')].some(e=>window.getComputedStyle(e).visibility==="visible")}async function w(){return[...document.querySelectorAll('iframe[src*="/recaptcha/api2/anchor"]'),...document.querySelectorAll('iframe[src*="/recaptcha/enterprise/anchor"]')].some(e=>window.getComputedStyle(e).visibility==="visible")}for(;;)await r.sleep(1e3),await S(),await w(),d()?await f():p()?await h():l()&&await g()})();
